var dataProcessing=function(e){e.generateModesObject=function(r,o,a){var n=(new e.Point({x:e.mouseX,y:e.mouseY}),{"Walked only":{color:e.yellow,yLevel:.2*e.windowHeight},Bus:{color:e.green,yLevel:.4*e.windowHeight},Train:{color:e.blue,yLevel:.6*e.windowHeight},"Car - as driver":{color:e.pink,yLevel:.8*e.windowHeight}});for(var t in n)if(n.hasOwnProperty(t)){var u=1-a,s=a,i=o.below.suburb,b=o.above.suburb,l=e.suburbModePercentages[i][t],d=e.suburbModePercentages[b][t],c=u*l+s*d;n[t].magnitude=c}return n},e.parseTransitData=function(r){var o=["Sydney","Haymarket","Darlinghurst","Ultimo","Woolloomooloo","Pyrmont","Surry Hills","Kings Cross","Chippendale","The Rocks - Millers Point - Dawes Point","Potts Point","Elizabeth Bay","Glebe - Forest Lodge","Rushcutters Bay","Redfern","Darlington","Paddington","Rosebery","Camperdown","Waterloo - Zetland","Green Square","Centennial Park - Moore Park","Erskineville - Eveleigh","Newtown","Alexandria - Beaconsfield"],a=["Car - as driver","Bus","Train","Walked only"];e.suburbModeCounts={},e.suburbModePercentages={},e.maxSuburbPercentage=0,e.maxSuburbCount=0;var n="2011",t=n+"%",u=[];for(var s in r)if(r.hasOwnProperty(s)&&-1!=o.indexOf(s)){var i=parseFloat(r[s]["Distance from CBD"]);e.suburbModeCounts[s]={},e.suburbModePercentages[s]={},u.push(i);for(var b=0;b<a.length;b++){mode=a[b];var l=parseFloat(r[s][mode][t])/100,d=parseFloat(r[s][mode][n])/100;e.suburbModeCounts[s][mode]=d,e.suburbModePercentages[s][mode]=l,l>e.maxSuburbPercentage&&(e.maxSuburbPercentage=l),d>e.maxSuburbCount&&(e.maxSuburbCount=d)}}console.log(e.maxSuburbPercentage),e.suburbsDistance=e.generateSuburbDistances(r,o),e.maxDistance=Math.max.apply(Math,u),e.dataLoaded=1,console.log("We have our data!")},e.generateSuburbDistances=function(e,r){var o=[];for(var a in e)if(e.hasOwnProperty(a)&&-1!=r.indexOf(a)){var n=parseFloat(e[a]["Distance from CBD"]);o.push([a,n])}return o.sort(function(e,r){return e[1]-r[1]}),o},e.currentMouseDistanceKM=function(){return e.mouseX*(e.maxDistance/e.windowWidth)},e.prettyPrint=function(e){console.log(JSON.stringify(e,null,2))},e.nearestPointsToValue=function(e,r){for(var o,a,n=9999999,t=9999999,u=0;u<r.length;u++){var s=parseFloat(r[u][1]),i=r[u][0];s-e>0&&t>s-e&&(t=s-e,a=i),e-s>=0&&n>=e-s&&(n=e-s,o=i)}return{above:{suburb:a,kmFromSuburb:t},below:{suburb:o,kmFromSuburb:n}}}};