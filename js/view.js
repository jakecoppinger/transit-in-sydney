var view=function(e){e.minimumWindowSize=function(){var t=e.windowWidth,n=e.windowHeight;return n>t?t:n},e.drawBottomSlider=function(t){e.push(),e.fill(0);var n={x:t/e.maxDistance*e.windowWidth,y:e.windowHeight-e.windowHeight/15},o=e.minimumWindowSize()/50,r={p1:{x:n.x-o,y:n.y-o},p2:{x:n.x-o,y:n.y+o},p3:{x:n.x,y:n.y}};e.drawTriangle(r),e.pop()},e.drawCurrentSuburb=function(t,n,o,r,i){if(t.above.suburb){e.push(),e.blendMode(o),e.textFont(e.typeface);var a=255-n*r*255;1>i&&(a=255-a),e.fill(a);var l,d;parseFloat(t.above.kmFromSuburb)<=parseFloat(t.below.kmFromSuburb)?(l=t.above.kmFromSuburb,d=t.above.suburb):(l=t.below.kmFromSuburb,d=t.below.suburb);var w;w=d in e.shortenedSuburbsHash?e.shortenedSuburbsHash[d]:d,w=w.toLowerCase()+".",e.textSize(e.windowWidth/7.5),e.textAlign(e.CENTER);var u={x:e.windowWidth/2,y:e.windowHeight/2};e.text(w,u.x,u.y),e.pop()}},e.drawTransitTriangle=function(t,n){e.push(),e.fill(t),e.triangle(0,0,0,e.windowHeight,n.x,n.y),e.pop()},e.drawTransitTriangles=function(t){for(var n in t)if(t.hasOwnProperty(n)){var o=t[n],r=o.magnitude*e.windowWidth*e.globalDrawVals.triangleSizeVsArc;e.push(),e.fill(o.color),e.triangle(0,0,0,e.windowHeight,r,o.yLevel),e.pop()}},e.drawDebugText=function(t){e.push(),e.fill(0),e.textSize(e.windowHeight/40);var n=e.windowHeight/20;e.text(t,n,n),e.pop()},e.drawTransitCircles=function(t){e.push();for(var n in t)if(t.hasOwnProperty(n)){var o=t[n],r={x:o.magnitude*e.windowWidth,y:o.yLevel},i=o.magnitude*e.windowHeight;e.drawCircle(o.color,r,i)}e.pop()},e.drawTransitFigures=function(t){e.push(),e.textFont(e.typeface),e.blendMode(e.ADD),e.textAlign(e.CENTER);for(var n in t)if(t.hasOwnProperty(n)){var o=t[n],r={x:o.magnitude*e.windowWidth,y:o.yLevel},i=255*(1-o.percentageRatio),a=255*o.percentageRatio,l=(Math.round(100*o.interpolatedPercentage*10)/10).toString()+"%",d=Math.round(o.interpolatedCount).toString();e.textSize(150*o.magnitude);var w=120*o.magnitude;e.fill(i),e.text(l,r.x,r.y),e.fill(a),e.text(d,r.x,r.y+w)}e.pop()},e.drawTransitArcs=function(t){e.push();for(var n in t)if(t.hasOwnProperty(n)){var o=e.windowWidth/10,r=t[n],i={x:r.magnitude*e.windowWidth,y:r.yLevel},a=r.magnitude*e.windowWidth*e.globalDrawVals.triangleSizeVsArc,l=r.magnitude*e.windowHeight,d={x:a,y:r.yLevel},w={x:i.x,y:r.yLevel-l/2},u={x:i.x,y:r.yLevel+l/2},x={x:i.x+l/2,y:i.y},y={startControlP:{x:a+o,y:r.yLevel-50},endControlP:{x:i.x-o,y:r.yLevel-l/2}},s={startControlP:{x:a+o,y:r.yLevel+50},endControlP:{x:i.x-o,y:r.yLevel+l/2}};e.noStroke(),e.fill(r.color),e.beginShape(),e.vertex(d.x,d.y),e.bezierVertexPoint(y.startControlP,y.endControlP,w),e.vertexPoint(x),e.vertexPoint(u),e.bezierVertexPoint(s.endControlP,s.startControlP,d),e.endShape(),e.stroke(255,102,0),e.line(d.x,d.y,y.startControlP.x,y.startControlP.y),e.line(w.x,w.y,y.endControlP.x,y.endControlP.y),e.line(d.x,d.y,s.startControlP.x,s.startControlP.y),e.line(u.x,u.y,s.endControlP.x,s.endControlP.y),e.stroke(0,0,0);var p=9.4*l/10;e.push(),e.blendMode(e.OVERLAY),e.noStroke(),e.fill(175),e.ellipse(i.x,i.y,p,p),e.pop()}e.pop()}};