document.addEventListener("touchstart",function(e){xStart=e.touches[0].screenX,yStart=e.touches[0].screenY}),document.addEventListener("touchmove",function(e){e.preventDefault()});var main=function(e){var a=-1,r=-1;e.absoluteSuburbs={},e.percentageSuburb={},e.suburbsDistance={},e.maxDistance={},e.dataLoaded=0;var t=0;e.globalDrawVals={triangleSizeVsArc:.25},e.shortenedSuburbsHash={"Alexandria - Beaconsfield":"Alexandria","The Rocks - Millers Point - Dawes Point":"The Rocks","Erskineville - Eveleigh":"Erskineville","Centennial Park - Moore Park":"Moore Park","Glebe - Forest Lodge":"Glebe","Waterloo - Zetland":"Waterloo"},e.shorternedModesHash={"Walked only":"Walk","Car - as driver":"Car"},e.images={},e.preload=function(){e.typeface=e.loadFont("fonts/Akzidenz Grotesk Pro Med Regular.otf"),e.images={Walk:e.loadImage("images/walk.svg"),Bus:e.loadImage("images/bus.svg"),Train:e.loadImage("images/train.svg"),Car:e.loadImage("images/car.svg")}},e.setup=function(){e.createCanvas(e.windowWidth,e.windowHeight),e.yellow=e.color(222,207,34),e.green=e.color(9,141,68),e.blue=e.color(0,153,202),e.pink=e.color(204,25,119),e.orange=e.color(230,73,35);var a="data/city_of_sydney_transport_data_2011.json",r=new XMLHttpRequest,t=a;r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){var a=JSON.parse(r.responseText);e.parseTransitData(a)}},r.open("GET",t,!0),r.send()},e.draw=function(){if((e.touchX!=r||e.touchY!=a||e.redrawCanvas)&&1==e.dataLoaded){var o=e.currentMouseDistanceKM(),n=e.nearestPointsToValue(o,e.suburbsDistance),s=n.below.kmFromSuburb,i=n.above.kmFromSuburb,d=s+i,u=n.below.kmFromSuburb/d,l=2*Math.abs(u-.5),c="";c+="fps: "+e.frameRate()+"\n",c+=e.prettyStr(n);var b=e.updateGlobalDrawVals(w),w=e.generateModesObject(b,o,n,u);e.background(255),e.noStroke(),e.blendMode(e.MULTIPLY),e.drawCurrentSuburb(n,l,e.BLEND,.3,1),e.drawBottomSlider(o),e.drawVerticalSlider(b,o),e.drawTransitTriangles(w),e.drawTransitCircles(w,b),e.drawTransitArcs(w,b),e.drawCurrentSuburb(n,l,e.BURN,.5,1),e.drawTransitFigures(w,b),e.drawModeLabels(w),e.drawJakeCoppinger(),a=e.touchY,r=e.touchX,t=0}},e.windowResized=function(){e.resizeCanvas(e.windowWidth,e.windowHeight),e.redrawCanvas=1},e.mouseMoved=function(){},e.updateGlobalDrawVals=function(a){return{circleDiameterRatio:e.windowHeight/1.6,triangleSizeVsArc:.25,percentageCountRatio:e.mouseY/e.windowHeight}},e.prettyStr=function(e){return JSON.stringify(e,null,2)}};